---
title: GitHub 101
author: "Romain Forestier"
---



Why using github?
Back up
Track changes
Collaboration


Requirements before meeting:
Have git installed (link)
Have usethis and gitcreds R package installed install.packages(c(“usethis”,"gitcreds"))


First step: having git installed on your computer
Need to have git installed on computer first

Install on windows
http://git-scm.com/downloads

Mac/linux: already installed (means nectar too)

```{bash}
which git
```


Gives the path to git

On windows might need to give the path in global options

Edit git info using R (and usethis package)

```{r}
usethis::edit_git_config()
```



### Initialize a git repo

build a new simple project
no git panel for now

can initialise with git during creation of new project
this command does it to

```{r}
usethis::use_git()
```

Now we have a git tab

Clock button is the history of the project (all the commits done)

## Commiting things

Creating new file
```{r}
file.edit("test.R")
```

Yellow symbols means git is waiting for you to commit or not. Click on it and it becomes green, to add the file for the first time to git. Write commit message and commit.


Now add something in test.R and save. The script is in the git tab in blue, meaning there are differences between git and your local save.
Commit the changes and check the history

Rstudio has a build in tool to show you the changes between each commit.

That's the track change function of Git

## Connecting GitHub and goind online

Create a github account

Now, github uses personal access tokens (PAT) instead of passwords. Once can also use SSH to connect with GitHub but if you know what SSH is, you also know how to set it up yourself probably.

```{r}
usethis::create_github_token()
```

This sends you in your git hub account where you can create a PAT that will allow you to send your local code in your repositories in GitHub. Think of the PAT as a strong password with editable privileges.

Once you create your PAT store it somewhere as you are never going to see it again on GitHub


Now to connect to github the easiest is to store your credentials with Rstudio

```{r}
gitcreds::gitcreds_set()
```

You need to enter your PAT in the password slot. The passworkd you use to connect to your github account won't work.

Now you will be able to host your R projects into GitHub repositories


Different cases

Rstudio first

For when you already have a project that you want to put on GitHub

You need to have git set up in your project with `use_git()` first, then use

```{r}
usethis::use_github()

```

Easy done


GitHub first

When you create a new project in Rstudio, you can select the version control option and you need to enter the GitHUb url to link (green code button) it to your project




Removing the last commit

To remove the last commit from git, you can simply run git reset --hard HEAD^ If you are removing multiple commits from the top, you can run git reset --hard HEAD~2 to remove the last two commits. You can increase the number to remove even more commits.

If you want to "uncommit" the commits, but keep the changes around for reworking, remove the "--hard": git reset HEAD^ which will evict the commits from the branch and from the index, but leave the working tree around.

If you want to save the commits on a new branch name, then run git branch newbranchname before doing the git reset.


Change Git Remote URL
In order to change the URL of a Git remote, you have to use the “git remote set-url” command and specify the name of the remote as well as the new remote URL to be changed.
$ git remote set-url <remote_name> <remote_url>
For example, let’s say that you want to change the URL of your Git origin remote.
In order to achieve that, you would use the “set-url” command on the “origin” remote and you would specify the new URL.
$ git remote set-url origin https://git-repo/new-repository.git
git remote set-url origin https://baldrech:PAT@github.com/jporobicg/ECOSUM


IF no upstream is selected for your local branch
git push --set-upstream origin branch_name

Check branch status

git branch -v

Check link between origin and local
git remote show origin






Useful link: http://r-bio.github.io/git-installation/
https://docs.github.com/en/get-started/quickstart/set-up-git
